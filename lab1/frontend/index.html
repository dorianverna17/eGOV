<!DOCTYPE html>
<html>
<head>
    <title>Car Loan Calculator</title>
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js"></script>
    <script>
        function calculateLoan() {
            const carPrice = document.getElementById("carPrice").value;
            const loanTerm = document.getElementById("loanTerm").value;

            var soapEnvelope = `<?xml version="1.0" encoding="utf-8"?>
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/"
                  xmlns:service="service">
    <soapenv:Header/>
    <soapenv:Body>
        <service:calculateLoan>
            <service:carPrice>${carPrice}</service:carPrice>
            <service:loanTerm>${loanTerm}</service:loanTerm>
        </service:calculateLoan>
    </soapenv:Body>
</soapenv:Envelope>`;

            $.ajax({
                url: "http://127.0.0.1:8000",
                type: "POST",
                dataType: "xml",
                contentType: "text/xml; charset=utf-8",
                data: soapEnvelope,
                crossDomain: true,  // Add this line
                success: function(response, textStatus, xhr) {
                    if (xhr.status == 200) {
                        var result = $(response).find("calculateLoanResponse").text();
                        console.log(result)
                        document.getElementById("result").innerHTML = "Monthly Payment: $" + result;
                    }
                },
                error: function(error) {
                    console.error(error);
                    document.getElementById("result").innerHTML = "Error calculating loan.";
                }
            })
        }
    </script>
    <style>
        .myDiv {
            width: 200px;
            height: 200px;
            background-color: lightblue;
            text-align: center;
        }
    </style>
</head>

<body>
    <h1>Car Loan Calculator</h1>

    <form id="loanForm">
        Car Price: <input type="number" id="carPrice" name="carPrice"><br><br>
        Loan Term (months): <input type="number" id="loanTerm" name="loanTerm"><br><br>
        <input type="button" value="Calculate" onclick="calculateLoan()">
    </form>

    <div id="result" class="myDiv"></div>
</body>

</html>